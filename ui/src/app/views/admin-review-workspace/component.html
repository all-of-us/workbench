<h2>Review Workspaces</h2>
<div *ngIf="fetchingWorkspacesError" class="error">
  <div>Error fetching workspaces for review. Please <a (click)="submitFetchingWorkspacesBugReport()">submit a bug report</a>.</div>
  <clr-icon style="margin-left: 1rem;" shape="times" (click)="fetchingWorkspacesError = false"></clr-icon>
</div>
<div *ngIf="contentLoaded; else contentLoading">
  <ul>
    <li *ngFor="let ws of workspaces">
      <div class="purpose">
        <h3>{{ws.name}}</h3>
        <p>by {{ws.creator}}</p>
        <p *ngIf="ws.description">{{ws.description}}</p>
        <p *ngIf="ws.researchPurpose.additionalNotes">{{ws.researchPurpose.additionalNotes}}</p>
      </div>
      <div class="review-buttons">
        <button (click)="approve(ws, true)">Approve</button>
        <button (click)="approve(ws, false)">Reject</button>
      </div>
    </li>
  </ul>
</div>

<clr-modal [(clrModalOpen)]="reviewError" *ngIf="reviewError">
  <h3 class="modal-title">Error:</h3>
  <div class="modal-body">Could not review workspace '{{reviewedWorkspace.name}}'. Please <a (click)="submitReviewWorkspaceBugReport()">submit a bug report</a>.</div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="reviewError = false">Ok</button>
  </div>
</clr-modal>

<ng-template #contentLoading>
  <div class="loading-area">
    <span class="spinner spinner-md" style="padding-top: 1rem"></span>
    <span class="loading-text">Loading workspaces for review...</span>
  </div>
</ng-template>
<app-bug-report *ngIf="bugReportOpen"
                [bugReportDescription]="bugReportDescription"
                [onClose]="closeBugReport"></app-bug-report>
